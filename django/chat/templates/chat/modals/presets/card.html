{% load i18n %}
{% load chat_tags %}
{% load static %}

{% block page_css %}
  <style>
  .card {
    border: none;
    box-shadow: 2px 4px 10px -1px rgb(0 0 0 / 0.1), 0px 1px 8px -2px rgb(0 0 0 / 0.1) !important;
  }

  /* Do we want this?
  ::selection {
    color: var(--bs-white);
    background: var(--bs-dark);
  }
  */

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: transparent;
    border-bottom: none;
    padding-bottom: 0;
    padding-top: .45rem;

    button {
      background-color: transparent;
      border: none;
      
      i.bi.bi-heart-fill {
        border-color: var(--app-color-red-1);
        color: var(--app-color-red-1);        
      }
      &:hover {        
        i.bi.bi-heart {
          border-color: var(--app-color-red-1);
          color: var(--app-color-red-1);    
        }

        i.bi.bi-star {
          border-color: var(--app-color-yellow-1);
          color: var(--app-color-yellow-1);
        }

        i.bi.bi-heart,
        i.bi.bi-heart-fill {
          text-shadow: 0px 0px 7px var(--app-color-red-1);
        } 

        i.bi.bi-star,
        i.bi.bi-star-fill {
          text-shadow: 0px 0px 7px var(--app-color-yellow-2);
        }
        background-color: transparent !important;
        
      }
      &:focus-visible {        
        background-color: var(--bg-light-gray);
        border: none !important;
        outline: none !important;
        box-shadow: none;

        &i.bi.bi-heart,
        &i.bi.bi-heart-fill {
          border: solid 1px var(--app-color-red-1);
          background-color: var(--app-color-red-1-hover);
        }

        &i.bi.bi-start,
        &i.bi.bi-star-fill {
          border: solid 1px var(--app-color-yellow-1);
          background-color: var(--app-color-yellow-2);          
        }

        color: transparent;
      }
    }
  }


  .card-footer {      
    display: grid !important;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1rem;  
    background-color: transparent;    
    border-top: none;
    padding-top: 0;
    padding-bottom: .65rem;

    button {
      font-size: 0.875rem;
      line-height: 1.25rem;
      
      &:hover {
        background-color: var(--bs-light) !important;        
      }
    }
  }
  </style>

{% endblock page_css %}

<li class="card" data-default="{{ preset.default }}">
  <div class="card-header align-items-center">
    <div class="card-title my-auto text-truncate me-2 fw-semibold" style="line-height: 1.25rem; font-size: 0.875rem; letter-spacing: -0.025rem;"
      {# TODO: change to billingual preset name #}
      title="{{ preset.name_en }}">{{ preset.name_en }}</div>
    <div class="d-flex align-items-center">
      {% include "chat/modals/presets/shared_icon.html" %}
      {% include "chat/modals/presets/default_icon.html" %}
      {% include "chat/modals/presets/favourite.html" %}
    </div>
  </div>

  <div class="card-body pt-2"
       style="line-height: 1.25rem;
              font-size: 0.875rem">
    <p class="preset-description card-text text-muted"
       style="min-height: 4.5rem !important;
              -webkit-box-orient: vertical !important;
              display: -webkit-box !important;
              -webkit-line-clamp: 4 !important;
              overflow: hidden !important;
              text-overflow: ellipsis !important;
              white-space: normal !important">{% get_preset_description preset LANGUAGE_CODE %}</p>
  </div>
  <div class="card-footer">
    <button type="button"
            class="btn btn-light fw-semibold"
            data-bs-dismiss="modal"
            hx-post="{% url 'chat:chat_options' chat_id=chat_id action='load_preset' preset_id=preset.id %}"
            hx-target="#options-accordion">{% trans "Load" %}</button>
    <button type="button"
            class="btn btn-light fw-semibold"
            hx-get="{% url 'chat:get_preset_form' chat_id=chat_id %}"
            hx-target="#presets-modal-body"
            hx-swap="innerHTML transition:true">{% trans "Edit" %}</button>
  </div>

</li>

{% block page_script %}
  <script src="{% static 'chat/js/card.js' %}"></script>
{% endblock %}
