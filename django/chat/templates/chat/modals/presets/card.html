{% load i18n %}
{% load chat_tags %}

{% block page_css %}
  <style>
  .card {
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  }

  /* Do we want this?
  ::selection {
    color: var(--bs-white);
    background: var(--bs-dark);
  }
  */

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: transparent;
    border-bottom: none;
    padding-bottom: 0;

    button {
      background-color: transparent;
      border: none;
      border-color: var(--app-color-red-1);
      i.bi.bi-heart-fill {
        color: var(--app-color-red-1);        
      }
      &:hover {
        i.bi.bi-heart {
          color: var(--app-color-red-1);    
        }
        background-color: transparent !important;
        text-shadow: 0px 0px 7px var(--app-color-red-1);
      }
      &:focus-visible {
        border: solid 1px var(--app-color-red-1);
        background-color: var(--app-color-red-1-hover);
        box-shadow: none;
        color: transparent;
      }
    }
  }


  .card-footer {
    display: flex !important;
    background-color: transparent;
    padding: 0;

    button {
      padding: var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);
      border: 0 solid var(--bs-card-border-color) !important;
      border-radius: 0;

      &:hover {
        background-color: var(--bs-light) !important;
      }


      &:first-of-type {
        border-bottom-left-radius: var(--bs-card-inner-border-radius) !important;
      }

      &:last-child {
        border-left-width: 1px !important;
        border-bottom-right-radius: var(--bs-card-inner-border-radius) !important;
      }

      i {
        font-size: 0.9rem;
      }
    }
  }
  </style>

{% endblock page_css %}

<li class="card">
  <div class="card-header align-items-center">
    <div class="card-title fs-6 my-auto text-truncate me-2 fw-medium"
         title="{{ preset.name_en }}">{{ preset.name_en }}</div>
    <div class="d-flex align-items-center">
      {% include "chat/modals/presets/shared_icon.html" %}
      {% include "chat/modals/presets/favourite.html" %}
    </div>
  </div>

  <div class="card-body pt-2">
    <p class="card-text fs-6"
       style="-webkit-box-orient: vertical !important;
              display: -webkit-box !important;
              -webkit-line-clamp: 4 !important;
              overflow: hidden !important;
              text-overflow: ellipsis !important;
              white-space: normal !important">{% get_preset_description preset LANGUAGE_CODE %}</p>
  </div>
  <div class="card-footer">
    <button type="button"
            class="btn btn-ghost flex-grow-1"
            data-bs-dismiss="modal"
            hx-post="{% url 'chat:chat_options' chat_id=chat_id action='load_preset' preset_id=preset.id %}"
            hx-target="#options-accordion">
      <i class="bi bi-download me-2 text-secondary"></i><span>{% trans "Load" %}</span>
    </button>
    <button type="button"
            class="btn btn-ghost flex-grow-1"
            hx-get="{% url 'chat:get_preset_form' chat_id=chat_id %}"
            hx-target="#presets-modal-body"
            hx-swap="innerHTML transition:true">
      <i class="bi bi-pencil me-2 text-secondary"></i><span>Edit</span>
    </button>
  </div>

</li>
