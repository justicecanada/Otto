{% load i18n %}

{% block page_css %}
  <style>
<<<<<<< HEAD
=======
  .modal-body{
    max-height: 85vh !important;
    overflow-y: scroll;
  }

>>>>>>> presets-refactor
  .card-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
    gap: 2rem;
    padding-left: 0;
    padding-right: 0;
  }

  .btn-ghost {
    background-color: transparent !important;
    border: none !important;

    &:focus-visible {
      outline-style: solid !important;
      outline-color: black !important;
      outline-width: 2px !important;
    }
  }
  </style>
{% endblock page_css %}

<div class="modal-body" id="preset-card-list">
  <div class="row px-3 pb-3">
    <div style="top: 0; bottom: 0; min-height: 300px">
      <div class="col-12 d-flex flex-column">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h2 class="fs-6 my-auto">{% trans "Available Presets" %}</h2>
          <button type="button"
                  class="btn btn-outline-dark btn-sm"
                  hx-get="{% url 'chat:create_preset' chat_id=chat_id %}"
                  hx-target="#presets-modal-body"
                  hx-swap="innerHTML transition:true">
            <i class="bi bi-plus me-1"></i>
            <span>{% trans "Create new preset from current chat settings" %}</span>
          </button>
        </div>
        <ul class="card-list">
          {% if presets|length == 0 %}
            {# TODO: Add a message saying there are no presets yet #}
            NO PRESETS AVAILABLE
          {% else %}
          {% endif %}
          {% for preset in presets %}
            {% include "chat/modals/presets/card.html" %}
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>

</div>

{% block page_script %}
  <script>
    (function () {      
      const tooltipTriggerList = document.querySelectorAll('#presets-modal-body > .modal-body [data-bs-toggle="tooltip"]');
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl, {delay: {show: 500, hide: 200}}));
    })();    
  </script>
{% endblock %}
