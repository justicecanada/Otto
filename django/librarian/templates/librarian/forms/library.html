{% load i18n %}
{% load rules %}

<form id="library-form"
      hx-post="{% if form.instance.id %} {% url 'librarian:modal_existing_item' 'library' form.instance.id %} {% else %} {% url 'librarian:modal_create' 'library' %} {% endif %}">
  {{ form.non_field_errors }}
  <h6>
    {% if form.instance.id %}
      {% trans "Edit library" %}
    {% else %}
      {% trans "Create library" %}
    {% endif %}
  </h6>
  {% csrf_token %}
  {# For some reason I just CANNOT get {{ form.id }} to render, so I have to do this #}
  <input type="hidden"
         name="id"
         value="{{ form.instance.id|default_if_none:'' }}">
  <div class="mb-3">
    <label for="{{ form.name_en.id_for_label }}"
           class="col-form-label col-form-label-sm">{% trans "Name (English)" %}</label>
    {{ form.name_en.errors }}
    {{ form.name_en }}
  </div>
  <div class="mb-3">
    <label for="{{ form.name_fr.id_for_label }}"
           class="col-form-label col-form-label-sm">{% trans "Name (French)" %}</label>
    {{ form.name_fr.errors }}
    {{ form.name_fr }}
  </div>
  <div class="mb-3">
    <label for="{{ form.description_en.id_for_label }}"
           class="col-form-label col-form-label-sm">{% trans "Description (English)" %}</label>
    {{ form.description_en.errors }}
    {{ form.description_en }}
  </div>
  <div class="mb-3">
    <label for="{{ form.description_fr.id_for_label }}"
           class="col-form-label col-form-label-sm">{% trans "Description (French)" %}</label>
    {{ form.description_fr.errors }}
    {{ form.description_fr }}
  </div>
  <div class="mb-3">
    <label for="{{ form.order.id_for_label }}"
           class="col-form-label col-form-label-sm">{% trans "Order" %}</label>
    {{ form.order.errors }}
    {{ form.order }}
  </div>
  {% if form.is_public %}
    <div class="mb-3">
      {# Bootstrap checkbox for is_public #}
      <div class="form-check">
        {{ form.is_public }}
        <label class="form-check-label"
               for="{{ form.is_public.id_for_label }}"
               style="font-size:0.875rem">{% trans "Visible to all JUS users" %}</label>
        {{ form.is_public.errors }}
      </div>
    </div>
  {% endif %}
  <div class="row">
    <div class="col">
      <button type="submit" class="btn btn-sm btn-primary me-1">{% trans "Save changes" %}</button>
      <button type="button"
              class="btn btn-sm btn-outline-secondary"
              hx-get="{% if form.instance.id %} {% url 'librarian:modal_existing_item' 'library' form.instance.id %} {% else %} {% url 'librarian:modal' %} {% endif %}">
        {% trans "Cancel" %}
      </button>
    </div>
    {% if form.deletable %}
      <div class="col-auto">
        <button type="button"
                class="btn btn-sm btn-outline-danger"
                hx-delete="{% url 'librarian:modal_existing_item' 'library' form.instance.id %}"
                hx-confirm="{% trans 'DANGER: Are you sure you want to delete this library? This action is permanent.' %}">
          {% trans "Delete" %}
        </button>
      </div>
    {% endif %}
  </div>
</form>
